#### 核心概念：粘性广播 (Sticky Broadcast)
在深入代码之前，必须先彻底理解什么是粘性广播。
1. 是什么？
粘性广播是一种特殊的广播，它在被发送出去后，并不会立即消失。相反，它会“粘”在系统里，就像一张贴在公告栏上的通知。系统会一直保留着最后一次发送的该 `action` 的粘性广播 `Intent`。
2. 为什么需要它？
它的主要目的是让后来的参与者能够立即获取当前的状态，而不需要等待下一次状态变更事件。
举个经典的例子：电池电量 (`ACTION_BATTERY_CHANGED`)
- 系统会以粘性广播的形式发送电池状态信息（电量、是否在充电等）。
- 假设当前电池电量是 85%。系统发送了一个包含 `level=85` 的粘性广播。
- 现在，你的 App 启动了一个 Activity，并动态注册了一个接收器来监听 `ACTION_BATTERY_CHANGED`，你想在界面上立刻显示当前电量。
- 如果没有粘性广播：你的 App 必须等待下一次电量变化（比如从 85% 变为 84%）时，才能收到广播并更新 UI。在这之前，你的 UI 只能显示一个默认值或空白。
- 有了粘性广播：在你调用 `registerReceiver` 的瞬间，AMS 就会检查“公告栏”，发现上面贴着一张关于 `ACTION_BATTERY_CHANGED` 的通知（那个 `level=85` 的 Intent）。AMS 会立即将这个 `Intent` 作为 `registerReceiver` 方法的返回值给你。你的 App 拿到这个 `Intent` 后，可以立刻解析出电量并更新 UI，无需任何等待。

重要提示 (截至 2025 年):
`sendStickyBroadcast()` 这个 API 在 Android 5.0 (API 21) 中已被废弃。因为它存在安全风险（任何 App 都可以注册并获取这些系统状态，可能泄露信息）和性能问题。现在，系统内部仍然在使用粘性广播机制（如电池电量），但不再推荐第三方 App 发送自定义的粘性广播。推荐的替代方案是使用 `LiveData`、`StateFlow` 或其他响应式编程模式来管理和分发状态。